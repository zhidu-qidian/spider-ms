# spider-ms:爬虫管理系统


主要包含：

+ 主页：今日各网站抓取量，今日个类型数据量显示，一周内各类型数据量图标、历史数据量查询（外链其他服务网页实现）
+ 任务实情：简单查看爬虫各阶段的任务情况
+ Redis事情：简单查看Redis的使用情况
+ 库表查询：精简的Mongodb查询（使用mongo查询语法），切勿输入中文字符
+ 数据源管理：
    + 一级源管理：管理网站一级的数据源
    + 二级源管理：管理频道一级的数据源

+ 解析测试：测试在服务器上某个数据源的爬虫解析是否正常
+ 解析异常汇报：在出现数据量急剧变动时，通过运行定时任务中的脚本，在此处进行异常查看。
+ 微博评论查询：查询某条新闻评论的微博来源
+ 广告图：添加要屏蔽的广告图
    + 第一步：输入图片url，和referer（如果有），点击测试添加，获取下面返回的md5
    + 第二步：将md5值copy到输入框，再次点击测试添加
+ 微信公众号添加：在新微信爬虫方案下，该功能暂时无用
+ 奇点专用：
    + 添加要过滤的敏感字词
    + 查看一条新闻的频道来源
    
**由于需求不断变动，代码比较杂乱。请多注意**

配置相关：

在`config.py`中配置如下条目：

+ MONGO数据库地址，鉴权信息
+ PG数据库地址，鉴权信息
+ Redis地址，鉴权信息
+ 用于登陆Token生成的SECRET_KEY


在`uwsgi.ini`配置部署相关的选项

在 `app/auth.py`中配置用户名和密码



运行：

方法1：
```bash
uwsgi uwsgi.ini
```
方法2（慎用，该方法涉及git pull -> kill 原来的进程 -> uwsgi启动）：
```bash
./kill_update_restart.sh
```


    